const cookie = {
  setCookie: function(name, value) {
    // 当前时间
    let expDate = new Date();
    // 当前时间戳
    let curTamp = expDate.getTime()
    // 前一天的23:59:59
    let weeHours = new Date(expDate.toLocaleDateString()).getTime() - 1;
    // 计算今日已过去的时间（现在的时间戳减去前一天23:59:59的时间戳）
    let pastTamp = curTamp - weeHours;
    // 计算剩余时间(毫秒  今天一天时间减去已过去的时间)
    let expTamp = 24 * 60 * 60 * 1000 - pastTamp;
    // 保存时间：现在的时间戳加上今天剩余的毫秒，得到今天23:59:59的时间戳
    expDate.setTime(expTamp + curTamp);
    document.cookie = name + "=" + encodeURIComponent(value) + ";expires=" + expDate.toGMTString() + ";path=/";
  },

  getCookie: function(name) {
    let arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
    if (arr = document.cookie.match(reg)) {
      return decodeURIComponent(arr[2]);
    } else {
      return null;
    }
  },

  delCookie: function(name) {
    let exp = new Date();
    exp.setTime(exp.getTime() - 1);
    let cval = this.getCookie(name);
    if (cval != null) {
      document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString() + ";path=/";
    }
  }
}

module.exports = cookie